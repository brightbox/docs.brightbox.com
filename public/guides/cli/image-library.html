<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Brightbox - Image Library</title>
    <link href="http://localhost:4000/stylesheets/0reset.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/960_24_col.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/main.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/buttons.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/tiptip.css" media="screen" rel="stylesheet" type="text/css" />       
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <script src="/javascripts/head.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3144138-4']);
        _gaq.push(['_setDomainName', 'docs.brightbox.com']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
  </head>
<body class="community">

 <header>
   <nav>
  <div id="nav_inner" class="container_24">
    <div id="logo"><h1><a href="/">Brightbox</a></h1></div>

    <ul class="primary">
      
        <li>
          <a href="http://brightbox.com"><span>brightbox.com</span></a>
        </li>
      
    </ul>

  </div>
</nav>


   <div id="banner" >

      <div class="container_24 small" id="banner_inner">

          <div id="title">
            <h2>Documentation.</h2>
          </div>
      </div>

    </div><!-- /banner -->
</header>

<div id="main">
  <div class="content container_24">
    
      
      <div id="breadcrumbs">
        
        	<a href="/">Overview</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides.html">Guides</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides/cli.html">CLI</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides/cli/image-library.html">Image Library</a> 
        	 
        
      </div>
      


    <h2>Image Library</h2>
    
    <p>The image library holds disk images and snapshots. When you create a new server with a particular image, the build systems retrieve the image from the image library. When you snapshot a server, the resulting image is uploaded to the image library.</p>

<h3 id='ftp_access'>FTP access</h3>

<p>You can upload new images or download snapshots using TLS encrypted FTP. Firstly, you need to reset your ftp password. So get your account id:</p>

<pre><code>$ brightbox-accounts list

 id         name    cloud_ip_limit  ram_limit  ram_used  ram_free
------------------------------------------------------------------
 acc-xxxxx  example 10              90000      5120      84880   
 ------------------------------------------------------------------</code></pre>

<p>and reset the password:</p>

<pre><code>$ brightbox-accounts reset_ftp_password acc-xxxxx
Resetting ftp password for acc-xxxxx
                  id: acc-xxxxx
                name: example
    library_ftp_host: ftp.library.gb1.brightbox.com
    library_ftp_user: acc-xxxxx
library_ftp_password: mynewpassword</code></pre>

<p>You can now just use your ftp client to access the library:</p>

<pre><code>$ lftp acc-xxxxx@ftp.library.gb1.brightbox.com
Password: 
lftp acc-xxxxx@ftp.library.gb1.brightbox.com:~&gt; ls    
drwxr-sr-x   2 acc-xxxxx library      4096 May 17 11:16 images
drwxr-sr-x   2 acc-xxxxx library      4096 May 17 11:17 incoming</code></pre>

<p>The <code>incoming/</code> directory is where you should upload new images of your own. You can then register them using the API and they are moved into the <code>images/</code> directory (which is read-only). Any snapshots you create using the API are also stored in the <code>images/</code> directory, for convenient access.</p>

<h3 id='registering_a_new_image'>Registering a new image</h3>

<p>Once you&#8217;ve uploaded your new image to the <code>incoming/</code> directory using ftp, you register it. In this case I&#8217;ve uploaded a 32bit image called <code>slackware.img</code></p>

<pre><code>$ brightbox-images register -a i686 -n Slackware -d &quot;Fresh slackware install&quot; -s slackware.img

 id         owner      type    created_on  status    size  name            
----------------------------------------------------------------------------
 img-7geqi  acc-h3nbk  upload  2011-05-19  creating  0     slackware (i686)
----------------------------------------------------------------------------</code></pre>

<p>Once it&#8217;s been registered it will be deleted from <code>incoming/</code> and be available in the <code>images/</code> directory named by the new images id (<code>img-7geqi</code> in this case). You can see it listed via the API now:</p>

<pre><code>$ brightbox-images list

 id         owner      type      created_on  status   size   name                                       
---------------------------------------------------------------------------------------------------------
 img-hvqt1  brightbox  official  2011-04-18  public   2049   Ubuntu Hardy 8.04 server (i686)            
 img-687qk  brightbox  official  2011-04-18  public   2049   Ubuntu Hardy 8.04 server (x86_64)          
 img-2ab98  brightbox  official  2011-04-18  public   1409   Ubuntu Lucid 10.04 server (i686)           
 img-4gqhs  brightbox  official  2011-05-09  public   1409   Ubuntu Lucid 10.04 server (i686)           
 img-7geqi  acc-h3nbk  upload    2011-05-19  private  3050   Slackware (i686)                           
---------------------------------------------------------------------------------------------------------</code></pre>

<p>And it can be used to build servers in the usual manner:</p>

<pre><code>$ brightbox-servers create -n &quot;my slackware box&quot; img-7geqi</code></pre>
  </div><!-- /content -->
</div><!-- /main -->


<footer>
<div id="footer_inner" class="container_24">
  <div class="grid_9 alpha">
  <h4>Follow @brightbox</h4>  
    
  <p class="social">
    <a href="http://twitter.com/brightbox" title="Twitter (@brightbox)" class="tip"><img src="/images/icons/twitter.png" /></a> 
    <a href="http://facebook.com/brightbox" title="Facebook" class="tip"><img src="/images/icons/facebook.png" /></a> 
    <a href="http://flickr.com/brightbox" title="Flickr" class="tip"><img src="/images/icons/flickr.png" /></a> 
    <a href="http://github.com/brightbox" title="GitHub" class="tip"><img src="/images/icons/github.png" /></a> 
    <a href="http://youtube.com/brightbox" title="YouTube" class="tip"><img src="/images/icons/youtube.png" /></a> 
  </p>
    
   <form id="subscribe" action="http://brightbox.createsend.com/t/y/s/bykuul/" method="post">
     <label for="bykuul-bykuul">Receive email updates about new products, features and other news (unsubscribe anytime).</label>
     
      <p>
        <input type="text" name="cm-bykuul-bykuul" id="bykuul-bykuul" placeholder="your email" />
      <button type="submit">subscribe</button></p>
    </form>
    <p class="copyright">Copyright &copy; 2011 Brightbox Systems Ltd</p>
    <p class="links">
      <a href="/legal/terms">Terms &amp; Conditions</a> &bull; 
      <a href="https://api.gb1.brightbox.com/1.0/">API</a> &bull; 
      <a href="http://docs.brightbox.com">Documentation</a> &bull;
      <a href="/about/contact">Contact us</a>
    </p>
  </div>

  <div class="clear">.</div>

<a href="http://github.com/brightbox/brightbox-docs" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a>
  
</div>
</footer>

   <script type="text/javascript">
    head.js(
     { 'before': '/javascripts/before.js' },
     { 'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js' },
     { 'jquery.smooth-scroll': '/javascripts/jquery.smooth-scroll.min.js' },
     { 'jquery.twitter': '/javascripts/jquery.twitter.js' },
     { 'jquery.tiptip': '/javascripts/jquery.tiptip.min.js' },
     { 'jquery.fancyzoom': '/javascripts/jquery.fancyzoom.js' },
     { 'disqus': 'http://brightbox.disqus.com/embed.js' },
     { 'jqueryui': 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js' },
  </script>
</body>
</html>
