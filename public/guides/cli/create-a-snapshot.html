<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Brightbox - Creating a snapshot</title>
    <link href="http://localhost:4000/stylesheets/0reset.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/960_24_col.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/main.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/buttons.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://localhost:4000/stylesheets/tiptip.css" media="screen" rel="stylesheet" type="text/css" />       
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <script src="/javascripts/head.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3144138-4']);
        _gaq.push(['_setDomainName', 'docs.brightbox.com']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
  </head>
<body class="community">

 <header>
   <nav>
  <div id="nav_inner" class="container_24">
    <div id="logo"><h1><a href="/">Brightbox</a></h1></div>

    <ul class="primary">
      
        <li>
          <a href="http://brightbox.com"><span>brightbox.com</span></a>
        </li>
      
    </ul>

  </div>
</nav>


   <div id="banner" >

      <div class="container_24 small" id="banner_inner">

          <div id="title">
            <h2>Documentation.</h2>
          </div>
      </div>

    </div><!-- /banner -->
</header>

<div id="main">
  <div class="content container_24">
    
      
      <div id="breadcrumbs">
        
        	<a href="/">Overview</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides.html">Guides</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides/cli.html">CLI</a> 
        	<b>&rsaquo;</b> 
        
        	<a href="/guides/cli/create-a-snapshot.html">Creating a snapshot</a> 
        	 
        
      </div>
      


    <h2>Creating a snapshot</h2>
    
    <p>Snapshotting a server takes an instant copy of the server&#8217;s disk which can then be used as the image for new servers.</p>

<p>The snapshots can also be downloaded from the image library.</p>

<h3 id='create_the_snapshot'>Create the snapshot</h3>

<p>Snapshots are created using the brightbox-servers snapshot command. Just give it the id of the server you want to snapshot:</p>

<pre><code>$ brightbox-servers snapshot srv-gwgk2
Snapshotting server srv-gwgk2</code></pre>

<h3 id='view_the_snapshot_image_info'>View the snapshot image info</h3>

<p>Taking the snapshot is instantaneous, but it then takes a few minutes to be copied into the image library. You can see the resulting image in the image list:</p>

<pre><code>$ brightbox-images list

 id         owner      type      created_on  status    size   name                                       
----------------------------------------------------------------------------------------------------------
 img-99q79  brightbox  official  2010-10-02  public    10244  CentOS 5.5 server (i686)                   
 img-pnqnc  brightbox  official  2010-10-03  public    10240  CentOS 5.5 server (x86_64)                 
 img-qjuex  brightbox  official  2010-10-14  public    10244  Fedora 14 Beta Base (i686)                 
 img-vyeeg  brightbox  official  2010-10-15  public    10244  Fedora 14 Beta Base (x86_64)               
 img-1okdf  brightbox  official  2010-11-19  public    20480  FreeBSD 8.1 minimal (i686)                 
 img-aoubd  brightbox  official  2010-11-19  public    20480  FreeBSD 8.1 minimal (x86_64)               
 img-tjjt6  brightbox  official  2010-09-27  public    1409   Ubuntu Lucid 10.04 server (x86_64)         
 img-hm6oj  brightbox  official  2010-10-01  public    1409   Ubuntu Lucid 10.04 server  (i686)          
 img-9vxqi  brightbox  official  2010-10-14  public    1409   Ubuntu Maverick 10.10 server (i686)        
 img-t4p09  brightbox  official  2010-10-14  public    1409   Ubuntu Maverick 10.10 server (x86_64)      
 img-y22uq  acc-h3nbk  snapshot  2010-12-19  creating  20480  Snapshot of srv-gwgk2 19 Dec 12:57 (i686)  
----------------------------------------------------------------------------------------------------------</code></pre>

<p>The snapshot has been given the image id <code>img-y22uq</code> and is currently creating. The name field indicates the image is the result of a snapshot of <code>srv-gwgk2</code>.</p>

<pre><code>$ brightbox-images show img-y22uq 
                id: img-y22uq
              type: snapshot
             owner: acc-h3nbk
        created_at: 2010-12-19T12:57:37Z
            status: private
              arch: i686
              name: Snapshot of srv-gwgk2 19 Dec 12:57 (i686)
       description: 
      virtual_size: 20480
         disk_size: 421
compatibility_mode: false
          official: false
       ancestor_id: img-9vxqi</code></pre>

<p>Here you can see that the snapshot copy has now completed and the status is private, which means only your account has access to it. The virtual_size is how big the entire disk is and the disk_size is how big the actual snapshot is. The disk_size will vary depending on how much data is written to your server.</p>

<h3 id='create_a_new_server_using_the_snapshot'>Create a new server using the snapshot</h3>

<p>The snapshot image can be used like any other image. You can build a clone of the original server like this:</p>

<pre><code>$ brightbox-servers create -n &quot;myclone&quot; img-y22uq
Creating a nano (typ-4nssg) server with image Snapshot of srv-gwgk2 19 Dec 12:57 (img-y22uq)

 id         status    type  zone   created_on  image_id   cloud_ips  name   
-----------------------------------------------------------------------------
 srv-v2fym  creating  nano  gb1-b  2010-12-19  img-y22uq             myclone
-----------------------------------------------------------------------------</code></pre>

<p>The new server will be given a new identifier and IP address, but otherwise will be identical to the one you originally snapshotted.</p>

<h3 id='downloading_a_copy_of_the_image'>Downloading a copy of the image</h3>

<p>The snapshot image is automatically available for download from the image library via ftp. This allows you to take a copy of a server to run on your local development environment, or to migrate it to another host.</p>

<p>You&#8217;ll need your image library ftp credentials (see the Image Library guide for more details).</p>

<pre><code>$ lftp acc-h3nbk@ftp.library.gb1.brightbox.com
Password: xxxxxxxxxxxx
lftp acc-h3nbk@ftp.library.gb1.brightbox.com:/&gt; cd images
lftp acc-h3nbk@ftp.library.gb1.brightbox.com:/images&gt; ls -h
-rw-r--r--   1 acc-h3nbk library    420.1M Dec 19 13:00 img-y22uq.gz
lftp acc-h3nbk@ftp.library.gb1.brightbox.com:/images&gt; get img-y22uq.gz </code></pre>

<p>The image is just a raw copy of the disk, compressed using the gzip utility. You can uncompress it using gunzip and boot it using virtualisation software such as kvm, or xen (in hvm mode).</p>

<h2 id='would_you_like_to_know_more'>Would you like to know more?</h2>

<p>Here you created a snapshot, then created a new server using the snapshot image and finally downloaded the image via ftp.</p>

<p>You might want to learn more about how to <a href='/guides/cli/image-library.html'>upload your own image to the image library</a>.</p>
  </div><!-- /content -->
</div><!-- /main -->


<footer>
<div id="footer_inner" class="container_24">
  <div class="grid_9 alpha">
  <h4>Follow @brightbox</h4>  
    
  <p class="social">
    <a href="http://twitter.com/brightbox" title="Twitter (@brightbox)" class="tip"><img src="/images/icons/twitter.png" /></a> 
    <a href="http://facebook.com/brightbox" title="Facebook" class="tip"><img src="/images/icons/facebook.png" /></a> 
    <a href="http://flickr.com/brightbox" title="Flickr" class="tip"><img src="/images/icons/flickr.png" /></a> 
    <a href="http://github.com/brightbox" title="GitHub" class="tip"><img src="/images/icons/github.png" /></a> 
    <a href="http://youtube.com/brightbox" title="YouTube" class="tip"><img src="/images/icons/youtube.png" /></a> 
  </p>
    
   <form id="subscribe" action="http://brightbox.createsend.com/t/y/s/bykuul/" method="post">
     <label for="bykuul-bykuul">Receive email updates about new products, features and other news (unsubscribe anytime).</label>
     
      <p>
        <input type="text" name="cm-bykuul-bykuul" id="bykuul-bykuul" placeholder="your email" />
      <button type="submit">subscribe</button></p>
    </form>
    <p class="copyright">Copyright &copy; 2011 Brightbox Systems Ltd</p>
    <p class="links">
      <a href="/legal/terms">Terms &amp; Conditions</a> &bull; 
      <a href="https://api.gb1.brightbox.com/1.0/">API</a> &bull; 
      <a href="http://docs.brightbox.com">Documentation</a> &bull;
      <a href="/about/contact">Contact us</a>
    </p>
  </div>

  <div class="clear">.</div>

<a href="http://github.com/brightbox/brightbox-docs" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a>
  
</div>
</footer>

   <script type="text/javascript">
    head.js(
     { 'before': '/javascripts/before.js' },
     { 'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js' },
     { 'jquery.smooth-scroll': '/javascripts/jquery.smooth-scroll.min.js' },
     { 'jquery.twitter': '/javascripts/jquery.twitter.js' },
     { 'jquery.tiptip': '/javascripts/jquery.tiptip.min.js' },
     { 'jquery.fancyzoom': '/javascripts/jquery.fancyzoom.js' },
     { 'disqus': 'http://brightbox.disqus.com/embed.js' },
     { 'jqueryui': 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js' },
  </script>
</body>
</html>
